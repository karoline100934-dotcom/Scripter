--[[
    EGOR GAMES - MAXIMUM SPEED FARM (FIXED)
    Features: Physics Force Walk (Anim + Speed Points), Auto Rebirth
    Support: PC & Android (Universal Drag)
    Made By @SilentScript
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")

local LocalPlayer = Players.LocalPlayer

-- Cleanup old UI
if CoreGui:FindFirstChild("EgorSpeedFinal") then
    CoreGui.EgorSpeedFinal:Destroy()
end

-- // CONFIGURATION \\ --
local AUTO_WALK = false
local AUTO_REBIRTH = false
local ACCENT_COLOR = Color3.fromRGB(0, 255, 170)
local UI_COLOR = Color3.fromRGB(20, 20, 20)

-- // UI SETUP \\ --
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "EgorSpeedFinal"
ScreenGui.Parent = CoreGui
ScreenGui.ResetOnSpawn = false

-- Notification System
local function SmoothNotification(titleText, msgText)
    local NotifFrame = Instance.new("Frame")
    NotifFrame.Parent = ScreenGui
    NotifFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    NotifFrame.Position = UDim2.new(1, 20, 0.8, 0)
    NotifFrame.Size = UDim2.new(0, 220, 0, 50)
    local Corner = Instance.new("UICorner") Corner.CornerRadius = UDim.new(0, 8) Corner.Parent = NotifFrame
    local Stroke = Instance.new("UIStroke") Stroke.Parent = NotifFrame Stroke.Color = ACCENT_COLOR
    
    local NTitle = Instance.new("TextLabel")
    NTitle.Parent = NotifFrame; NTitle.BackgroundTransparency = 1; NTitle.Position = UDim2.new(0, 10, 0, 5); NTitle.Size = UDim2.new(1, -20, 0, 15)
    NTitle.Font = Enum.Font.Code; NTitle.Text = titleText; NTitle.TextColor3 = ACCENT_COLOR; NTitle.TextSize = 14; NTitle.TextXAlignment = Enum.TextXAlignment.Left
    
    local NText = Instance.new("TextLabel")
    NText.Parent = NotifFrame; NText.BackgroundTransparency = 1; NText.Position = UDim2.new(0, 10, 0, 20); NText.Size = UDim2.new(1, -20, 0, 25)
    NText.Font = Enum.Font.Code; NText.Text = msgText; NText.TextColor3 = Color3.fromRGB(255, 255, 255); NText.TextSize = 12; NText.TextXAlignment = Enum.TextXAlignment.Left

    TweenService:Create(NotifFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quart), {Position = UDim2.new(1, -230, 0.8, 0)}):Play()
    task.delay(3, function()
        local t = TweenService:Create(NotifFrame, TweenInfo.new(0.5), {Position = UDim2.new(1, 20, 0.8, 0)})
        t:Play() t.Completed:Connect(function() NotifFrame:Destroy() end)
    end)
end

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = UI_COLOR
MainFrame.Position = UDim2.new(0.5, -90, 0.5, -60)
MainFrame.Size = UDim2.new(0, 180, 0, 130)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true

local MainCorner = Instance.new("UICorner") MainCorner.CornerRadius = UDim.new(0, 10) MainCorner.Parent = MainFrame
local MainStroke = Instance.new("UIStroke") MainStroke.Parent = MainFrame MainStroke.Color = Color3.fromRGB(60, 60, 60)

-- Universal Drag Support
local dragging, dragInput, dragStart, startPos
MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true; dragStart = input.Position; startPos = MainFrame.Position
        input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
    end
end)
MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end
end)
UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Title & Close
local Title = Instance.new("TextLabel")
Title.Parent = MainFrame; Title.BackgroundTransparency = 1; Title.Position = UDim2.new(0, 12, 0, 8); Title.Size = UDim2.new(0, 120, 0, 20)
Title.Font = Enum.Font.Code; Title.Text = "Egor Games"; Title.TextColor3 = Color3.fromRGB(255, 255, 255); Title.TextSize = 14; Title.TextXAlignment = Enum.TextXAlignment.Left

local CloseBtn = Instance.new("TextButton")
CloseBtn.Parent = MainFrame; CloseBtn.BackgroundTransparency = 1; CloseBtn.Position = UDim2.new(1, -25, 0, 5); CloseBtn.Size = UDim2.new(0, 20, 0, 20)
CloseBtn.Font = Enum.Font.Code; CloseBtn.Text = "X"; CloseBtn.TextColor3 = Color3.fromRGB(255, 80, 80); CloseBtn.TextSize = 16
CloseBtn.MouseButton1Click:Connect(function() AUTO_WALK = false; AUTO_REBIRTH = false; ScreenGui:Destroy() end)

-- Buttons
local WalkBtn = Instance.new("TextButton")
WalkBtn.Parent = MainFrame; WalkBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30); WalkBtn.Position = UDim2.new(0, 10, 0, 35); WalkBtn.Size = UDim2.new(1, -20, 0, 35)
WalkBtn.Font = Enum.Font.Code; WalkBtn.Text = "AUTO WALK: OFF"; WalkBtn.TextColor3 = Color3.fromRGB(200, 200, 200); WalkBtn.TextSize = 12
local Corner1 = Instance.new("UICorner") Corner1.CornerRadius = UDim.new(0, 6) Corner1.Parent = WalkBtn

local RebirthBtn = Instance.new("TextButton")
RebirthBtn.Parent = MainFrame; RebirthBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30); RebirthBtn.Position = UDim2.new(0, 10, 0, 80); RebirthBtn.Size = UDim2.new(1, -20, 0, 35)
RebirthBtn.Font = Enum.Font.Code; RebirthBtn.Text = "AUTO REBIRTH: OFF"; RebirthBtn.TextColor3 = Color3.fromRGB(200, 200, 200); RebirthBtn.TextSize = 12
local Corner2 = Instance.new("UICorner") Corner2.CornerRadius = UDim.new(0, 6) Corner2.Parent = RebirthBtn

-- // LOGIC WALK YANG DIOPTIMASI UNTUK SPEED POINTS \\ --
task.spawn(function()
    while task.wait() do
        if AUTO_WALK then
            local char = LocalPlayer.Character
            local hum = char and char:FindFirstChild("Humanoid")
            local hrp = char and char:FindFirstChild("HumanoidRootPart")
            
            if hum and hrp and hum.Health > 0 then
                -- 1. Trigger Animasi (Agar Terdeteksi Bergerak)
                hum:Move(Vector3.new(0, 0, -1), true)
                
                -- 2. Beri Kecepatan Fisik (Agar Speed Bertambah)
                hrp.AssemblyLinearVelocity = hrp.CFrame.LookVector * hum.WalkSpeed
                
                -- 3. Loop Mini agar physics tidak kaku
                RunService.Heartbeat:Wait()
            end
        end
    end
end)

-- // AUTO REBIRTH \\ --
task.spawn(function()
    local rebirthRemote = ReplicatedStorage:WaitForChild("Events"):WaitForChild("Rebirth")
    while task.wait(0.5) do
        if AUTO_REBIRTH then
            pcall(function()
                rebirthRemote:InvokeServer()
            end)
        end
    end
end)

-- Button Logic
WalkBtn.MouseButton1Click:Connect(function()
    AUTO_WALK = not AUTO_WALK
    WalkBtn.Text = AUTO_WALK and "AUTO WALK: ON" or "AUTO WALK: OFF"
    WalkBtn.TextColor3 = AUTO_WALK and ACCENT_COLOR or Color3.fromRGB(200, 200, 200)
end)

RebirthBtn.MouseButton1Click:Connect(function()
    AUTO_REBIRTH = not AUTO_REBIRTH
    RebirthBtn.Text = AUTO_REBIRTH and "AUTO REBIRTH: ON" or "AUTO REBIRTH: OFF"
    RebirthBtn.TextColor3 = AUTO_REBIRTH and ACCENT_COLOR or Color3.fromRGB(200, 200, 200)
end)

SmoothNotification("Notification", "Made By @SilentScript")
